{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\adamj\\\\OneDrive\\\\Desktop\\\\crwn-clothing-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"C:\\\\Users\\\\adamj\\\\OneDrive\\\\Desktop\\\\crwn-clothing-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\adamj\\\\OneDrive\\\\Desktop\\\\crwn-clothing-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{initializeApp}from\"firebase/app\";import{getAuth,signInWithRedirect,signInWithPopup,GoogleAuthProvider,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from\"firebase/auth\";import{getFirestore,doc,getDoc,setDoc,collection,writeBatch,query,getDocs}from\"firebase/firestore\";// Your web app's Firebase configuration\nvar firebaseConfig={apiKey:\"AIzaSyD4m--GCpT96-NpqmqXJe36Wk4PZWmWt5M\",authDomain:\"react-clothing-store-db1.firebaseapp.com\",projectId:\"react-clothing-store-db1\",storageBucket:\"react-clothing-store-db1.appspot.com\",messagingSenderId:\"170319196547\",appId:\"1:170319196547:web:109b6f60f23f52d40686b6\"};// Initialize Firebase\nvar firebaseApp=initializeApp(firebaseConfig);var googleProvider=new GoogleAuthProvider();googleProvider.setCustomParameters({promt:\"select_account\"});export var auth=getAuth();export var signInWithGooglePopup=function signInWithGooglePopup(){return signInWithPopup(auth,googleProvider);};export var signInWithGoogleRedirect=function signInWithGoogleRedirect(){return signInWithRedirect(auth,googleProvider);};export var db=getFirestore();export var addCollectionAndDocuments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(collectionKey,objectsToAdd){var collectionRef,batch;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collectionRef=collection(db,collectionKey);batch=writeBatch(db);objectsToAdd.forEach(function(object){var docRef=doc(collectionRef,object.title.toLowerCase());batch.set(docRef,object);});_context.next=5;return batch.commit();case 5:console.log(\"done\");case 6:case\"end\":return _context.stop();}}},_callee);}));return function addCollectionAndDocuments(_x,_x2){return _ref.apply(this,arguments);};}();export var getCategoriesAndDocuments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var collectionRef,q,querySnapshot,categoryMap;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:collectionRef=collection(db,\"categories\");q=query(collectionRef);_context2.next=4;return getDocs(q);case 4:querySnapshot=_context2.sent;categoryMap=querySnapshot.docs.reduce(function(acc,docSnapshot){var _docSnapshot$data=docSnapshot.data(),title=_docSnapshot$data.title,items=_docSnapshot$data.items;acc[title.toLowerCase()]=items;return acc;},{});return _context2.abrupt(\"return\",categoryMap);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getCategoriesAndDocuments(){return _ref2.apply(this,arguments);};}();export var createUserDocumentFromAuth=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(userAuth){var additionalInfo,userDocRef,userSnapshot,displayName,email,createdAt,_args3=arguments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:additionalInfo=_args3.length>1&&_args3[1]!==undefined?_args3[1]:{};if(userAuth){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3:userDocRef=doc(db,\"users\",userAuth.uid);_context3.next=6;return getDoc(userDocRef);case 6:userSnapshot=_context3.sent;if(userSnapshot.exists()){_context3.next=18;break;}displayName=userAuth.displayName,email=userAuth.email;createdAt=new Date();_context3.prev=10;_context3.next=13;return setDoc(userDocRef,_objectSpread({displayName:displayName,email:email,createdAt:createdAt},additionalInfo));case 13:_context3.next=18;break;case 15:_context3.prev=15;_context3.t0=_context3[\"catch\"](10);console.log(\"error creating the user\",_context3.t0.message);case 18:return _context3.abrupt(\"return\",userDocRef);case 19:case\"end\":return _context3.stop();}}},_callee3,null,[[10,15]]);}));return function createUserDocumentFromAuth(_x3){return _ref3.apply(this,arguments);};}();export var createAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(email,password){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(!email||!password)){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:_context4.next=4;return createUserWithEmailAndPassword(auth,email,password);case 4:return _context4.abrupt(\"return\",_context4.sent);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function createAuthUserWithEmailAndPassword(_x4,_x5){return _ref4.apply(this,arguments);};}();export var signInAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(email,password){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!email||!password)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:_context5.next=4;return signInWithEmailAndPassword(auth,email,password);case 4:return _context5.abrupt(\"return\",_context5.sent);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function signInAuthUserWithEmailAndPassword(_x6,_x7){return _ref5.apply(this,arguments);};}();export var signOutUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return signOut(auth);case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function signOutUser(){return _ref6.apply(this,arguments);};}();export var onAuthStateChangedListener=function onAuthStateChangedListener(callback){onAuthStateChanged(auth,callback);};","map":{"version":3,"sources":["C:/Users/adamj/OneDrive/Desktop/crwn-clothing-app/src/utils/firebase/firebase.utils.js"],"names":["initializeApp","getAuth","signInWithRedirect","signInWithPopup","GoogleAuthProvider","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","doc","getDoc","setDoc","collection","writeBatch","query","getDocs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseApp","googleProvider","setCustomParameters","promt","auth","signInWithGooglePopup","signInWithGoogleRedirect","db","addCollectionAndDocuments","collectionKey","objectsToAdd","collectionRef","batch","forEach","object","docRef","title","toLowerCase","set","commit","console","log","getCategoriesAndDocuments","q","querySnapshot","categoryMap","docs","reduce","acc","docSnapshot","data","items","createUserDocumentFromAuth","userAuth","additionalInfo","userDocRef","uid","userSnapshot","exists","displayName","email","createdAt","Date","message","createAuthUserWithEmailAndPassword","password","signInAuthUserWithEmailAndPassword","signOutUser","onAuthStateChangedListener","callback"],"mappings":"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","sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport {\r\n  getAuth,\r\n  signInWithRedirect,\r\n  signInWithPopup,\r\n  GoogleAuthProvider,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  signOut,\r\n  onAuthStateChanged,\r\n} from \"firebase/auth\";\r\nimport {\r\n  getFirestore,\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  collection,\r\n  writeBatch,\r\n  query,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyD4m--GCpT96-NpqmqXJe36Wk4PZWmWt5M\",\r\n  authDomain: \"react-clothing-store-db1.firebaseapp.com\",\r\n  projectId: \"react-clothing-store-db1\",\r\n  storageBucket: \"react-clothing-store-db1.appspot.com\",\r\n  messagingSenderId: \"170319196547\",\r\n  appId: \"1:170319196547:web:109b6f60f23f52d40686b6\",\r\n};\r\n\r\n// Initialize Firebase\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\n\r\nconst googleProvider = new GoogleAuthProvider();\r\ngoogleProvider.setCustomParameters({\r\n  promt: \"select_account\",\r\n});\r\n\r\nexport const auth = getAuth();\r\nexport const signInWithGooglePopup = () =>\r\n  signInWithPopup(auth, googleProvider);\r\nexport const signInWithGoogleRedirect = () =>\r\n  signInWithRedirect(auth, googleProvider);\r\n\r\nexport const db = getFirestore();\r\n\r\nexport const addCollectionAndDocuments = async (\r\n  collectionKey,\r\n  objectsToAdd\r\n) => {\r\n  const collectionRef = collection(db, collectionKey);\r\n  const batch = writeBatch(db);\r\n\r\n  objectsToAdd.forEach((object) => {\r\n    const docRef = doc(collectionRef, object.title.toLowerCase());\r\n    batch.set(docRef, object);\r\n  });\r\n\r\n  await batch.commit();\r\n  console.log(\"done\");\r\n};\r\n\r\nexport const getCategoriesAndDocuments = async () => {\r\n  const collectionRef = collection(db, \"categories\");\r\n  const q = query(collectionRef);\r\n  const querySnapshot = await getDocs(q);\r\n  const categoryMap = querySnapshot.docs.reduce((acc, docSnapshot) => {\r\n    const { title, items } = docSnapshot.data();\r\n    acc[title.toLowerCase()] = items;\r\n    return acc;\r\n  }, {});\r\n\r\n  return categoryMap;\r\n};\r\n\r\nexport const createUserDocumentFromAuth = async (\r\n  userAuth,\r\n  additionalInfo = {}\r\n) => {\r\n  if (!userAuth) return;\r\n  const userDocRef = doc(db, \"users\", userAuth.uid);\r\n  const userSnapshot = await getDoc(userDocRef);\r\n\r\n  if (!userSnapshot.exists()) {\r\n    const { displayName, email } = userAuth;\r\n    const createdAt = new Date();\r\n\r\n    try {\r\n      await setDoc(userDocRef, {\r\n        displayName,\r\n        email,\r\n        createdAt,\r\n        ...additionalInfo,\r\n      });\r\n    } catch (error) {\r\n      console.log(\"error creating the user\", error.message);\r\n    }\r\n  }\r\n\r\n  return userDocRef;\r\n};\r\n\r\nexport const createAuthUserWithEmailAndPassword = async (email, password) => {\r\n  if (!email || !password) return;\r\n\r\n  return await createUserWithEmailAndPassword(auth, email, password);\r\n};\r\n\r\nexport const signInAuthUserWithEmailAndPassword = async (email, password) => {\r\n  if (!email || !password) return;\r\n\r\n  return await signInWithEmailAndPassword(auth, email, password);\r\n};\r\n\r\nexport const signOutUser = async () => await signOut(auth);\r\n\r\nexport const onAuthStateChangedListener = (callback) => {\r\n  onAuthStateChanged(auth, callback);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}